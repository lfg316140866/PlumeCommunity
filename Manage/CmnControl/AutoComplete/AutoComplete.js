CmnMis_UI_Control_AutoComplete_Version = "2.2.1", function () { var a = CmnMis.UI.Control; a.AutoComplete = function (b, c) { Cmn.Object.Inherit(this, a.Text, [b, c]); var d = this; d.Type = "AutoComplete", d.OnDataLoadComplete = new Cmn.Event(this), d.SetCfgDescCfg({ FillSql: { Type: "SqlInput", Desc: "自动补全的数据sql", Val: "" }, DisplayFieldCount: { Type: "Text", Desc: "显示字段的个数sql", Val: "2" }, Limit: { Type: "Text", Desc: "显示的数据条数", Val: "10" } }), d.ControlCfg = d.InitControlConfig(Cmn.Extend(d.ControlCfg, c)), d.InitControl = function () { Cmn.UI && Cmn.UI.BasPlugin || CmnAjax.Func.LoadJs(Cmn.Func.GetRoot() + "Js/CmnUI/CmnUI.js"), Cmn.UI && Cmn.UI.AutoComplete || CmnAjax.Func.LoadJs(Cmn.Func.GetRoot() + "Js/CmnUI/AutoComplete/AutoComplete.js"), d.ControlDom.find(a.Selector.CtlContent).css({ border: " 1px solid #e6e6e6" }), d.AutoComplete = new Cmn.UI.AutoComplete(d.ControlDom.find("input"), Cmn.Func.GetRoot() + "Itf/CSharp/CmnMisItf.aspx?method=ExecSql"), d.AutoComplete.SerializeParam = function (a) { return { param: a, Limit: d.ControlCfg.Limit, DisplayFieldCount: d.ControlCfg.DisplayFieldCount, ExecSql: d.ControlCfg.FillSql } }, d.AutoComplete.OnDataLoadComplete.Add(function (a) { d.OnDataLoadComplete.Trigger([a]) }, "cmn-Control-AutoComplete-OnDataLoadComplete"), d.AutoComplete.OnChange.Add(function (a, b, c) { d.OnChange.Trigger([a, b, c]) }, "cmn-Control-AutoComplete-OnChange") }, d.GetValue = function () { return d.AutoComplete.GetValue() }, d.SetValue = function (a) { a ? CmnAjax.PostData(InterfaceUrl + "?method=ExecSql", { ExecSql: d.ControlCfg.FillSql, param: a, Limit: d.ControlCfg.Limit, DisplayFieldCount: d.ControlCfg.DisplayFieldCount }, function (a) { d.AutoComplete.SetValue(a) }) : d.AutoComplete.SetValue() }, d.Init = function () { d.SetValue(d.ControlCfg.Default || "") } } }();